<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Deadcetera â€” Band HQ</title>
    <link rel="stylesheet" href="styles.css">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="app-shell.css">
</head>
<body>
    <!-- DEV BANNER -->
    <div id="devBanner" style="background:linear-gradient(90deg,#f59e0b,#ef4444);color:white;text-align:center;padding:8px 15px;font-weight:700;font-size:0.85em;position:sticky;top:0;z-index:9999;display:flex;justify-content:space-between;align-items:center;">
        <span>ğŸš§ DEV BUILD â€” Testing Only</span>
        <span style="font-weight:400;font-size:0.85em;">app-dev.js | <a href="index.html" style="color:white;text-decoration:underline;">â† Back to Production</a></span>
    </div>

    <!-- TOP BAR -->
    <div class="topbar">
        <div class="topbar-left">
            <button class="hamburger" onclick="toggleMenu()" aria-label="Menu">
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round"><line x1="3" y1="6" x2="21" y2="6"/><line x1="3" y1="12" x2="21" y2="12"/><line x1="3" y1="18" x2="21" y2="18"/></svg>
            </button>
            <span class="topbar-brand" onclick="showPage('songs')" style="cursor:pointer">Deadcetera</span>
        </div>
        <div class="topbar-right">
            <button id="googleDriveAuthBtn" class="topbar-btn" onclick="handleGoogleDriveAuth()">ğŸ”— Connect</button>
            <button class="topbar-btn" onclick="showPage('admin')" title="Settings &amp; Admin">âš™ï¸</button>
        </div>
    </div>

    <!-- SLIDE-OUT MENU -->
    <div class="menu-overlay" id="menuOverlay" onclick="toggleMenu()"></div>
    <nav class="slide-menu" id="slideMenu">
        <div class="menu-brand">ğŸ¸ Deadcetera</div>
        <div class="menu-section">
            <div class="menu-section-title">Music</div>
            <button class="menu-item active" data-page="songs" onclick="showPage('songs')"><span class="menu-icon">ğŸµ</span> Song Library</button>
            <button class="menu-item" data-page="setlists" onclick="showPage('setlists')"><span class="menu-icon">ğŸ“‹</span> Setlists</button>
            <button class="menu-item" data-page="practice" onclick="showPage('practice')"><span class="menu-icon">ğŸ“…</span> Practice Plan</button>
        </div>
        <div class="menu-divider"></div>
        <div class="menu-section">
            <div class="menu-section-title">Band</div>
            <button class="menu-item" data-page="calendar" onclick="showPage('calendar')"><span class="menu-icon">ğŸ“†</span> Calendar</button>
            <button class="menu-item" data-page="gigs" onclick="showPage('gigs')"><span class="menu-icon">ğŸ¤</span> Gigs</button>
            <button class="menu-item" data-page="venues" onclick="showPage('venues')"><span class="menu-icon">ğŸ›ï¸</span> Venues & Contacts</button>
            <button class="menu-item" data-page="finances" onclick="showPage('finances')"><span class="menu-icon">ğŸ’°</span> Finances</button>
        </div>
        <div class="menu-divider"></div>
        <div class="menu-section">
            <div class="menu-section-title">Tools</div>
            <button class="menu-item" data-page="tuner" onclick="showPage('tuner')"><span class="menu-icon">ğŸ¸</span> Guitar Tuner</button>
            <button class="menu-item" data-page="metronome" onclick="showPage('metronome')"><span class="menu-icon">ğŸ¥</span> Metronome</button>
        </div>
        <div class="menu-divider"></div>
        <div class="menu-section">
            <button class="menu-item" data-page="equipment" onclick="showPage('equipment')"><span class="menu-icon">ğŸ›ï¸</span> Equipment</button>
            <button class="menu-item" data-page="contacts" onclick="showPage('contacts')"><span class="menu-icon">ğŸ‘¥</span> Contacts</button>
            <button class="menu-item" data-page="admin" onclick="showPage('admin')"><span class="menu-icon">âš™ï¸</span> Settings & Admin</button>
            <div class="menu-divider"></div>
            <button class="menu-item" data-page="help" onclick="showPage('help')"><span class="menu-icon">â“</span> Help & Guide</button>
        </div>
    </nav>

    <!-- MAIN CONTENT AREA -->
    <div class="main-content" id="mainContent">
        <!-- PAGE: Songs (existing app content) -->
        <div id="page-songs" class="app-page">
    <div class="container">
        <header>
            <!-- Logo placeholder - replace logo.png with your actual logo -->
            <img src="logo.png" alt="Deadcetera" class="logo" onerror="this.style.display='none'">
            <h1>ğŸ¸ Deadcetera</h1>
            <p class="subtitle">One app to jam, plan, and manage â€” so you can focus on the music.</p>
            
            <!-- Sign In -->
            <div id="signInPrompt" style="text-align:center;margin-top:12px;">
                <div style="position:relative;display:inline-block;">
                    <button id="googleDriveAuthBtn2" onclick="handleGoogleDriveAuth()" 
                        style="background:var(--accent);color:white;border:none;padding:10px 20px;border-radius:8px;font-size:0.95em;cursor:pointer;font-weight:600;"
                        onmouseenter="document.getElementById('signInTooltip').style.display='block'"
                        onmouseleave="document.getElementById('signInTooltip').style.display='none'">
                        ğŸ‘¤ Sign In
                    </button>
                    <div id="signInTooltip" style="display:none;position:absolute;top:100%;left:50%;transform:translateX(-50%);margin-top:8px;background:var(--bg-card,#1e293b);border:1px solid rgba(255,255,255,0.15);border-radius:10px;padding:14px;width:300px;z-index:100;text-align:left;font-size:0.82em;line-height:1.5;color:var(--text-muted,#94a3b8);box-shadow:0 8px 30px rgba(0,0,0,0.4);">
                        <div style="font-weight:700;color:white;margin-bottom:6px;">Why sign in?</div>
                        <div style="color:var(--green,#10b981);margin-bottom:4px;">âœ… <b>Signed in:</b></div>
                        <div style="margin-left:18px;margin-bottom:8px;">Your name appears on recordings, uploads & votes Â· Band data syncs across all members Â· Access shared setlists, finances & calendar</div>
                        <div style="color:var(--yellow,#f59e0b);margin-bottom:4px;">âš ï¸ <b>Not signed in:</b></div>
                        <div style="margin-left:18px;">You can browse songs & use tools Â· Uploads won't have your name Â· No access to shared band data</div>
                    </div>
                </div>
                <p style="font-size:0.82em;color:var(--text-dim,#64748b);margin-top:6px;">Sign in to sync with your bandmates</p>
            </div>
        </header>

        <!-- Step 1: Song Selection -->
        <div class="step-card" id="step1">
            <div style="display:flex;align-items:center;gap:10px;margin-bottom:12px">
                <div class="step-number" style="flex-shrink:0">1</div>
                <h2 style="margin:0;display:inline">Song Library</h2>
                <span style="color:var(--text-dim,#64748b);font-size:0.8em;margin-left:auto" id="songCount"></span>
            </div>
            <div class="search-box">
                <input 
                    type="text" 
                    id="songSearch" 
                    placeholder="Search for a song..." 
                    class="search-input"
                >
            </div>
            <!-- COMPACT FILTERS ROW -->
            <div style="display:flex;gap:8px;margin:12px 0;flex-wrap:wrap;align-items:center">
                <select id="bandFilter" class="app-select" onchange="filterByBand(this.value)" style="width:auto;min-width:140px;padding:7px 10px;font-size:0.85em;font-weight:600">
                    <option value="all">ğŸµ All Bands</option>
                    <option value="GD">Grateful Dead</option>
                    <option value="JGB">Jerry Garcia Band</option>
                    <option value="WSP">Widespread Panic</option>
                    <option value="Phish">Phish</option>
                    <option value="ABB">Allman Brothers</option>
                    <option value="Goose">Goose</option>
                    <option value="DMB">Dave Matthews Band</option>
                </select>
                <select id="statusFilter" class="app-select" onchange="filterByStatus(this.value)" style="width:auto;min-width:140px;padding:7px 10px;font-size:0.85em;font-weight:600">
                    <option value="all">ğŸ“Š All Statuses</option>
                    <option value="this_week">ğŸ¯ This Week</option>
                    <option value="gig_ready">âœ… Gig Ready</option>
                    <option value="needs_polish">âš ï¸ Needs Polish</option>
                    <option value="on_deck">ğŸ“š On Deck</option>
                </select>
                <label style="display:flex;align-items:center;gap:5px;cursor:pointer;font-size:0.82em;color:var(--text-muted,#94a3b8);padding:6px 10px;border:1px solid var(--border,rgba(255,255,255,0.08));border-radius:8px;background:rgba(255,255,255,0.04)" title="Show only songs that have documented vocal harmony parts for the band to practice together">
                    <input type="checkbox" id="harmoniesOnlyFilter" onchange="filterSongsSync(this.checked?'harmonies':'all')" style="accent-color:var(--accent,#667eea);width:14px;height:14px">
                    ğŸ¤ Harmonies <span title="Filter to show only songs with documented multi-part vocal harmonies" style="cursor:help;color:var(--text-dim,#64748b);font-size:0.85em">â“˜</span>
                </label>
            </div>
            
            <div class="song-dropdown" id="songDropdown">
                <!-- Songs populated here -->
            </div>
        </div>

<!-- Step 2: Band Resources (REPLACES Learning Resources) -->
<div class="step-card hidden" id="step2">
    <div style="display:flex;align-items:center;gap:10px;margin-bottom:4px">
        <div class="step-number" style="flex-shrink:0">2</div>
        <h2 style="margin:0" id="step2Title">ğŸ¸ Steps to Master</h2>
    </div>
    <p class="subtitle" id="bandResourcesSubtitle">Collaborative resources for your band</p>
    
    <!-- SONG METADATA -->
    <div class="song-metadata" style="background: #f9fafb; padding: 15px; border-radius: 8px; margin-bottom: 20px;">
        <div style="display: flex; gap: 20px; flex-wrap: wrap; align-items: center;">
            <div class="meta-item">
                <span style="font-weight: 600; color: #6b7280; margin-right: 8px;">ğŸ¤ Lead Singer:</span>
                <select id="leadSingerSelect" onchange="updateLeadSinger(this.value)" 
                    style="padding: 6px 12px; border: 1px solid #e2e8f0; border-radius: 6px; background: white; cursor: pointer;">
                    <option value="">Select...</option>
                    <option value="drew">Drew</option>
                    <option value="chris">Chris</option>
                    <option value="brian">Brian</option>
                    <option value="pierce">Pierce</option>
                    <option value="drew,chris">Drew & Chris (trading)</option>
                </select>
            </div>
            
            <div class="meta-item">
                <span style="font-weight: 600; color: #6b7280; margin-right: 8px;">ğŸ¸ Status:</span>
                <select id="songStatusSelect" onchange="updateSongStatus(this.value)"
                    style="padding: 6px 12px; border: 1px solid #e2e8f0; border-radius: 6px; background: white; cursor: pointer; font-weight: 600;">
                    <option value="">Not Started</option>
                    <option value="on_deck">ğŸ“š On Deck</option>
                    <option value="this_week">ğŸ¯ This Week</option>
                    <option value="needs_polish">âš ï¸ Needs Polish</option>
                    <option value="gig_ready">âœ… Gig Ready</option>
                </select>
            </div>
            
            <div class="meta-item">
                <span style="font-weight: 600; color: #6b7280; margin-right: 8px;">ğŸ¥ BPM:</span>
                <input type="number" id="songBpmInput" min="40" max="240" step="1" 
                    placeholder="120"
                    onchange="updateSongBpm(this.value)"
                    style="width: 70px; padding: 6px 10px; border: 1px solid #e2e8f0; border-radius: 6px; background: white;">
            </div>
            
            <div class="meta-item">
                <label style="display: flex; align-items: center; gap: 8px; cursor: pointer;">
                    <input type="checkbox" id="hasHarmoniesCheckbox" onchange="updateHasHarmonies(this.checked)"
                        style="width: 18px; height: 18px; cursor: pointer;">
                    <span style="font-weight: 600; color: #6b7280;">ğŸµ Has Harmonies</span>
                </label>
            </div>
        </div>
    </div>
    
    <!-- SPOTIFY REFERENCE VERSION - Voting -->
    <div class="resource-section" id="spotifySection">
        <div class="section-header">
            <h3>ğŸµ Reference Version (Band Voted)</h3>
            <p style="color: #6b7280; font-size: 0.9em;">
                Vote on which Spotify version to learn
                <button onclick="searchSpotify()" style="background: none; border: none; color: #667eea; text-decoration: underline; cursor: pointer; font-size: 0.9em; padding: 0; margin-left: 15px;">ğŸ” Search Spotify</button>
            </p>
        </div>
        
        <div id="spotifyVersionsContainer">
            <!-- Dynamically populated -->
        </div>
        
        <button class="secondary-btn" id="addSpotifyVersionBtn" style="margin-top: 12px;">
            + Suggest New/Alternate Version
        </button>
    </div>
    
    <!-- CHORD CHART -->
    <div class="resource-section" id="personalTabsSection">
        <div class="section-header">
            <h3>ğŸ“ Personal Tab Links</h3>
            <p style="color: #6b7280; font-size: 0.9em;">
                Each person can add their own Ultimate Guitar tab link
                <button onclick="searchUltimateGuitar()" style="background: none; border: none; color: #667eea; text-decoration: underline; cursor: pointer; font-size: 0.9em; padding: 0; margin-left: 15px;">ğŸ” Search Ultimate Guitar</button>
            </p>
        </div>
        
        <div id="personalTabsContainer">
            <!-- Dynamically populated -->
        </div>
        
        <!-- Add Your Tab Form -->
        <div id="addTabForm" style="background: #f9fafb; padding: 20px; border-radius: 12px; margin-top: 20px; border: 2px solid #e2e8f0;">
            <h4 style="margin: 0 0 15px 0; color: #2d3748;">Add Your Tab Link</h4>
            
            <div style="margin-bottom: 12px;">
                <label style="display: block; margin-bottom: 5px; font-weight: 600; color: #4b5563;">Tab URL:</label>
                <input type="text" id="tabUrlInput" 
                    placeholder="Paste your Ultimate Guitar tab link" 
                    style="width: 100%; padding: 12px; border: 2px solid #e2e8f0; border-radius: 8px; font-size: 0.95em;">
                <p style="font-size: 0.85em; color: #6b7280; margin-top: 5px;">
                    ğŸ’¡ Go to Ultimate Guitar, find your preferred tab, copy the full URL
                </p>
            </div>
            
            <div style="margin-bottom: 12px;">
                <label style="display: block; margin-bottom: 5px; font-weight: 600; color: #4b5563;">Notes (optional):</label>
                <input type="text" id="tabNotesInput" 
                    placeholder="E.g., Lead guitar tab, Bass with my edits, etc." 
                    style="width: 100%; padding: 12px; border: 2px solid #e2e8f0; border-radius: 8px; font-size: 0.95em;">
            </div>
            
            <button onclick="addPersonalTab()" 
                style="background: #667eea; color: white; border: none; padding: 12px 24px; border-radius: 8px; cursor: pointer; font-weight: 600; width: 100%;">
                â• Add My Tab Link
            </button>
        </div>
    </div>
    
    <!-- MOISES STEMS -->
    <div class="resource-section" id="moisesSection">
        <div class="section-header">
            <h3>ğŸšï¸ Moises Stems (Isolate Practice Parts)</h3>
            <p style="color: #6b7280; font-size: 0.9em;">Isolate practice parts</p>
        </div>
        
        <div id="moisesStemsContainer">
            <!-- Dynamically populated -->
        </div>
    </div>
    
    <!-- PRACTICE TRACKS -->
    <div class="resource-section" id="practiceTracksSection">
        <div class="section-header">
            <h3>ğŸµ Practice Tracks</h3>
            <p style="color: #6b7280; font-size: 0.9em;">Add videos instantly - auto-fetches title & thumbnail!</p>
        </div>
        
        <!-- Simple Add Form -->
        <div id="practiceTrackAddForm" style="background: #f9fafb; padding: 20px; border-radius: 12px; margin-bottom: 20px; border: 2px solid #e2e8f0;">
            <h4 style="margin: 0 0 15px 0; color: #2d3748;">Add Practice Track</h4>
            
            <div style="margin-bottom: 12px;">
                <label style="display: block; margin-bottom: 5px; font-weight: 600; color: #4b5563;">Video URL:</label>
                <input type="text" id="practiceTrackUrlInput" 
                    placeholder="Paste YouTube, YouTube Shorts, Vimeo, or any video URL" 
                    style="width: 100%; padding: 12px; border: 2px solid #e2e8f0; border-radius: 8px; font-size: 0.95em;">
            </div>
            
            <div style="margin-bottom: 12px;">
                <label style="display: block; margin-bottom: 5px; font-weight: 600; color: #4b5563;">Instrument:</label>
                <select id="practiceTrackInstrument" 
                    style="width: 100%; padding: 12px; border: 2px solid #e2e8f0; border-radius: 8px; font-size: 0.95em;">
                    <option value="">-- Select Instrument --</option>
                    <option value="bass">ğŸ¸ Bass</option>
                    <option value="leadGuitar">ğŸ¸ Lead Guitar</option>
                    <option value="rhythmGuitar">ğŸ¸ Rhythm Guitar</option>
                    <option value="keys">ğŸ¹ Keys/Keyboards</option>
                    <option value="drums">ğŸ¥ Drums</option>
                    <option value="vocals">ğŸ¤ Vocals</option>
                    <option value="wholeBand">ğŸ¶ Whole Band</option>
                </select>
            </div>
            
            <div style="margin-bottom: 15px;">
                <label style="display: block; margin-bottom: 5px; font-weight: 600; color: #4b5563;">Notes (optional):</label>
                <input type="text" id="practiceTrackNotes" 
                    placeholder="E.g., Great breakdown of the bass line" 
                    style="width: 100%; padding: 12px; border: 2px solid #e2e8f0; border-radius: 8px; font-size: 0.95em;">
            </div>
            
            <button id="addPracticeTrackBtn" class="chart-btn chart-btn-primary" onclick="addPracticeTrackSimple()" 
                style="width: 100%; padding: 14px; font-size: 1em;">
                âœ¨ Add Track (Auto-Fetch Title & Thumbnail)
            </button>
            
            <p style="margin: 12px 0 0 0; font-size: 0.85em; color: #6b7280;">
                ğŸ’¡ Just paste URL & select instrument - we'll fetch the rest automatically!
            </p>
        </div>
        
        <!-- Saved Tracks -->
        <div id="practiceTracksContainer">
            <!-- Dynamically populated -->
        </div>
    </div>
    
    <!-- HARMONIES -->
    <div class="resource-section" id="harmoniesSection">
        <div class="section-header">
            <h3>ğŸ¤ Harmony Parts</h3>
            <p style="color: #6b7280; font-size: 0.9em;">Who sings what, when</p>
        </div>
        
        <div id="harmoniesContainer">
            <!-- Dynamically populated -->
        </div>
    </div>
    
    <!-- REHEARSAL NOTES -->
    <div class="resource-section" id="rehearsalNotesSection">
        <div class="section-header">
            <h3>ğŸ“‹ Rehearsal Notes</h3>
            <p style="color: #6b7280; font-size: 0.9em;">Band feedback and tips - anyone can add!</p>
        </div>
        
        <div id="rehearsalNoteFormContainer"></div>
        
        <div id="rehearsalNotesContainer">
            <!-- Dynamically populated -->
        </div>
        
        <button class="secondary-btn" onclick="showRehearsalNoteForm()" style="margin-top: 12px;">
            + Add Note
        </button>
    </div>
    
    <!-- SONG STRUCTURE -->
    <div class="resource-section" id="songStructureSection">
        <div class="section-header">
            <h3>ğŸ­ Song Structure</h3>
            <p style="color: #6b7280; font-size: 0.9em;">How the song starts and ends</p>
        </div>
        
        <div id="songStructureContainer">
            <!-- Dynamically populated -->
        </div>
        
        <button class="secondary-btn" id="editSongStructureBtn" onclick="showSongStructureForm()" style="margin-top: 12px;">
            âœï¸ Edit Song Structure
        </button>
        
        <div id="songStructureFormContainer" style="display: none; margin-top: 15px;">
            <!-- Form will be inserted here -->
        </div>
    </div>
    
    <!-- GIG NOTES -->
    <div class="resource-section" id="gigNotesSection">
        <div class="section-header">
            <h3>ğŸ¸ Performance Tips</h3>
        </div>
        
        <div id="gigNotesContainer">
            <!-- Dynamically populated -->
        </div>
    </div>
</div>
        <!-- Step 3: Version Selection (renumbered from Step 2) -->
        <div class="step-card hidden" id="step3">
            <div class="step-number">3</div>
            <h2>Top 5 Live Versions</h2>
            <p class="step-description">Based on community rankings and sound quality</p>
            <div id="versionsContainer">
                <!-- Top 5 versions populated here -->
            </div>
        </div>

        <!-- Step 4: Download (renumbered from Step 3) -->
        <div class="step-card hidden" id="step4">
            <div class="step-number">4</div>
            <h2>Download & Upload to Moises</h2>
            <div class="download-card">
                <div class="selected-info" id="selectedInfo">
                    <!-- Selected song and version info -->
                </div>
                <div class="action-buttons">
                    <button class="primary-btn smart-download-btn" id="smartDownloadBtn" style="background: #10b981;">
                        âš¡ Smart Download (Just This Song!)
                    </button>
                    <button class="primary-btn" id="downloadBtn">
                        â¬‡ï¸ Download Full Show from Archive.org
                    </button>
                    <button class="primary-btn moises-btn" id="moisesBtn">
                        ğŸ›ï¸ Open Moises.ai Studio
                    </button>
                    <button class="primary-btn" id="setlistBtn" style="background: #48bb78;">
                        ğŸ“‹ View Setlist (Song Order & Timing)
                    </button>
                    <button class="primary-btn youtube-btn" id="youtubeSearchBtn" style="background: #ef4444;">
                        ğŸ¥ Search YouTube for This Song
                    </button>
                </div>
                <div id="progressContainer" class="hidden" style="margin-top: 15px; padding: 15px; background: #eff6ff; border-radius: 8px; border-left: 4px solid #3b82f6;">
                    <div style="display: flex; align-items: center; gap: 10px;">
                        <div class="spinner"></div>
                        <div>
                            <strong id="progressMessage">Processing...</strong>
                            <div style="margin-top: 5px; height: 8px; background: #dbeafe; border-radius: 4px; overflow: hidden;">
                                <div id="progressBar" style="height: 100%; background: #3b82f6; width: 0%; transition: width 0.3s;"></div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="workflow-guide">
                    <h3>ğŸ“‹ Your Practice Workflow:</h3>
                    <div style="background: #f7fafc; padding: 15px; border-radius: 8px; margin-top: 10px;">
                        <div style="margin-bottom: 10px; padding: 10px; background: white; border-radius: 6px; border-left: 4px solid #48bb78;">
                            <strong>âœ… STEP 1: Download MP3</strong>
                            <p style="margin: 5px 0 0 0; color: #4a5568; font-size: 0.9em;">
                                Click "Download MP3" button above â†’ Find the file on Archive.org â†’ Right-click â†’ Save to Downloads
                            </p>
                        </div>
                        <div style="margin-bottom: 10px; padding: 10px; background: white; border-radius: 6px; border-left: 4px solid #4299e1;">
                            <strong>â¬†ï¸ STEP 2: Upload to Moises</strong>
                            <p style="margin: 5px 0 0 0; color: #4a5568; font-size: 0.9em;">
                                Click "Open Moises.ai Studio" â†’ Click Upload â†’ Select your downloaded MP3
                            </p>
                        </div>
                        <div style="margin-bottom: 10px; padding: 10px; background: white; border-radius: 6px; border-left: 4px solid #ed8936;">
                            <strong>âš™ï¸ STEP 3: Separate Stems</strong>
                            <p style="margin: 5px 0 0 0; color: #4a5568; font-size: 0.9em;">
                                Choose "6 Stems" separation â†’ Wait 1-2 minutes for AI processing
                            </p>
                        </div>
                        <div style="padding: 10px; background: white; border-radius: 6px; border-left: 4px solid #667eea;">
                            <strong>ğŸ¸ STEP 4: Solo Your Part</strong>
                            <p style="margin: 5px 0 0 0; color: #4a5568; font-size: 0.9em;">
                                Click "Solo" on your instrument â†’ Adjust tempo â†’ Loop sections â†’ Practice!
                            </p>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Step 5: Part Selection Guide (renumbered from Step 4) -->
        <div class="step-card hidden" id="step5">
            <div class="step-number">5</div>
            <h2>Isolate Your Part in Moises</h2>
            <div class="parts-grid">
                <div class="part-card">
                    <div class="part-icon">ğŸ¤</div>
                    <h3>Vocals / Harmonies</h3>
                    <p>Solo the vocals track to learn melody and harmonies</p>
                </div>
                <div class="part-card">
                    <div class="part-icon">ğŸ¸</div>
                    <h3>Jerry Garcia (Lead)</h3>
                    <p>Isolate lead guitar to learn solos and fills</p>
                </div>
                <div class="part-card">
                    <div class="part-icon">ğŸ¸</div>
                    <h3>Bob Weir (Rhythm)</h3>
                    <p>Focus on rhythm guitar and chord progressions</p>
                </div>
                <div class="part-card">
                    <div class="part-icon">ğŸ¸</div>
                    <h3>Phil Lesh (Bass)</h3>
                    <p>Learn Phil's melodic bass lines</p>
                </div>
                <div class="part-card">
                    <div class="part-icon">ğŸ¥</div>
                    <h3>Drums</h3>
                    <p>Practice the groove and fills</p>
                </div>
                <div class="part-card">
                    <div class="part-icon">ğŸ¹</div>
                    <h3>Keyboards</h3>
                    <p>Isolate keys for atmospheric parts</p>
                </div>
            </div>
        </div>

        <!-- Reset Button -->
        <div class="reset-container hidden" id="resetContainer">
            <button class="reset-btn" onclick="resetWorkflow()">
                â†º Start Over with New Song
            </button>
        </div>
        
        <!-- YouTube Search Modal -->
        <div id="youtubeModal" class="modal hidden">
            <div class="modal-content">
                <div class="modal-header">
                    <h2>ğŸ¥ Search YouTube</h2>
                    <button class="close-btn" onclick="closeYoutubeModal()">Ã—</button>
                </div>
                <div class="modal-body">
                    <div id="youtubeSearchResults" class="youtube-results">
                        <!-- Results populated here -->
                    </div>
                </div>
            </div>
        </div>
        
        <!-- YouTube Search Modal (In-App) -->
        <div id="youtubeSearchModal" class="modal hidden">
            <div class="modal-content">
                <div class="modal-header">
                    <h2>ğŸ” Search YouTube</h2>
                    <button class="close-btn" onclick="closeYouTubeSearchModal()">Ã—</button>
                </div>
                <div class="modal-body">
                    <input type="text" id="youtubeSearchInput" class="search-input" placeholder="Search YouTube..." readonly style="margin-bottom: 15px;">
                    <div id="youtubeSearchResultsContainer">
                        <!-- Results populated here -->
                    </div>
                </div>
            </div>
        </div>
        
        <!-- Add Resource Modal -->
        <div id="addResourceModal" class="modal hidden">
            <div class="modal-content">
                <div class="modal-header">
                    <h2 id="addResourceTitle">Add Resource</h2>
                    <button class="close-btn" onclick="closeAddResourceModal()">Ã—</button>
                </div>
                <div class="modal-body">
                    <p id="addResourceInstructions"></p>
                    <input type="text" id="resourceUrlInput" class="search-input" placeholder="Paste URL here...">
                    <div id="urlPreviewContainer"></div>
                    <div style="display: flex; gap: 10px; margin-top: 15px; justify-content: flex-end;">
                        <button class="secondary-btn" onclick="closeAddResourceModal()">Cancel</button>
                        <button class="primary-btn" onclick="saveResource()">Save</button>
                    </div>
                </div>
            </div>
        </div>
    </div>
        </div><!-- end page-songs -->

        <!-- Dynamic pages rendered by JS -->
        <div id="page-setlists" class="app-page hidden"></div>
        <div id="page-practice" class="app-page hidden"></div>
        <div id="page-calendar" class="app-page hidden"></div>
        <div id="page-gigs" class="app-page hidden"></div>
        <div id="page-venues" class="app-page hidden"></div>
        <div id="page-finances" class="app-page hidden"></div>
        <div id="page-tuner" class="app-page hidden"></div>
        <div id="page-metronome" class="app-page hidden"></div>
        <div id="page-equipment" class="app-page hidden"></div>
        <div id="page-contacts" class="app-page hidden"></div>
        <div id="page-admin" class="app-page hidden"></div>
        <div id="page-help" class="app-page hidden"></div>
    </div>

    <footer style="text-align:center;padding:20px;font-size:0.8em;">
        <p style="margin-bottom:4px">Deadcetera â€” Band HQ Â· Less admin. More jams. ğŸ¤˜</p>
        <p style="font-size:0.72em;color:var(--text-dim,#64748b)">Â© 2025â€“2026 Drew Merrill. All rights reserved.</p>
    </footer>

    <script src="data.js"></script>
    <script src="audio-splitter.js"></script>
    <script src="app-dev.js"></script>
</body>
</html>
